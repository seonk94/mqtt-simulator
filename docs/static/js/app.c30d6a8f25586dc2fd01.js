webpackJsonp([1],{"22pj":function(t,e){},"7zck":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("3EgV"),s=n.n(i),o=n("Dd8w"),c=n.n(o),r=n("Gu7T"),u=n.n(r),l=n("fZjL"),m=n.n(l),p=n("mvHQ"),d=n.n(p),_=(n("mtWM"),{user_id:"",gw1_sn:"",mac:"",topic:"/cert"}),v={gw1_sn:"",topic:"/connect"},h={command_type:"",time:"",topic:"/command/"},f={conn_dev:"",gw1_type:"",gw1_status:"",gw1_sn:"",tm1_data_list:[{tm1_sn:"",skin_temp:"",abd_mov:"",sleep_pos:"",ev_temp:"",ev_hum:"",dev_status:"",batt_lv:"",rssi:""},{tm1_sn:"",skin_temp:"",abd_mov:"",sleep_pos:"",ev_temp:"",ev_hum:"",dev_status:"",batt_lv:"",rssi:""}],aq1_pm10:"",aq1_pm2_5:"",aq1_pm1_0:"",aq1_tvoc:"",aq1_co2:"",aq1_ev_temp:"",aq1_ev_hum:"",time:"",topic:"/data/"},g={command_type:"",topic:"/command/"},C={command_type:"",scan_tm1_list:[{tm1_sn:"",rssi:""}],con_tm1_list:[{tm1_sn:"",rssi:""}],cmd_no:"",topic:"/command/"},b={command_type:"",tm1_sn:"",cmd_no:"",topic:"/command/"},x={command_type:"",tm1_sn:"",cmd_no:"",topic:"/command/"},M={command_type:"",tm1_sn:"",temp:"",temp_low:"",temp_high:"",move:"",no_move_sec:"",pos1:"",pos2:"",pos3:"",pos4:"",led:"",motor:"",cmd_no:"",topic:"/command/"},w={command_type:"",cmd_no:"",config:"",topic:"/command/"},y={tm1_sn:"",warn_type:"",time:"",topic:"/warn/"},T={command_type:"",error_type:"",rcv_time:"",topic:"/command/"},k={command_type:"",error_type:"",cmd_no:"",topic:"/ack/"},q=function(t){switch(t){case"gw_cert":return _;case"gw_connect":return v;case"server_time":return h;case"m_data":return f;case"unsubscribe":return g;case"scan_res":return C;case"tm1_connect_req":return b;case"tm1_disconnect_req":return x;case"tm1_config":return M;case"gw1_config":return w;case"tm1_warn":return y;case"ack_server":return T;case"ack_gw":return k;default:console.log("not match")}},N=function(t){switch(t){case"user_id":return"user"+~~(10*Math.random()+1);case"gw1_sn":return"SN"+~~(1e7*Math.random());case"mac":return"01";case"command_type":return~~(10*Math.random());case"time":return(new Date).getTime();case"conn_dev":case"gw1_type":return~~(10*Math.random());case"gw1_status":return~~(5*Math.random());case"tm1_sn":return"TM1SN"+~~(1e5*Math.random());case"skin_temp":return~~(1e5*(1*Math.random()+2));case"abd_mov":case"sleep_pos":return~~(4*Math.random());case"ev_temp":return~~(1*Math.random());case"ev_hum":case"dev_status":case"batt_lv":return~~(5*Math.random());case"rssi":case"aq1_pm10":case"aq1_pm2_5":case"aq1_pm1_0":case"aq1_tvoc":case"aq1_co2":return~~(10*Math.random());case"aq1_ev_temp":return~~(1*Math.random());case"aq1_ev_hum":return~~(5*Math.random());case"cmd_no":return~~(10*Math.random());case"temp":case"temp_low":case"temp_high":return~~(1e5*(1*Math.random()+2));case"move":return~~(5*Math.random());case"no_move_sec":return~~(60*Math.random());case"pos1":case"pos2":case"pos3":case"pos4":case"led":case"motor":case"config":case"warn_type":case"error_type":return~~(5*Math.random());case"rcv_time":return(new Date).getTime();default:console.log(t)}},I=n("C7DB"),E=n.n(I),D={name:"PahoClient",props:{client:{}},data:function(){return{pahoClient:function(){},publishs:0,subscribes:0}},created:function(){},methods:{connect:function(t){this.pahoClient=new E.a.Client(t.host,Number(t.port),t.clientId),this.pahoClient.onConnectLost=this.onConnectLost,this.pahoClient.onMessageArrived=this.onMessageArrived,this.pahoClient.onMessageDelivered=this.onMessageDelivered,this.pahoClient.connect({onSuccess:this.onConnect})},onConnect:function(){var t=c()({},this.client,{connecting:!0,host:this.pahoClient.host,port:this.pahoClient.port,id:this.pahoClient.clientId});this.$store.commit("MODIFY_MQTTCLIENT",t),this.$emit("is-connect",this.pahoClient)},onConnectLost:function(t){0!==t.errorCode&&console.log("onConnectionLost:"+responseObject.errorMessage)},onMessageDelivered:function(t){this.publishs++},onMessageArrived:function(t){this.subscribes++}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h3",[this._v(this._s(this.subscribes)+" / "+this._s(this.publishs))])])},staticRenderFns:[]};var j=n("VU/8")(D,O,!1,function(t){n("22pj")},"data-v-f9774136",null).exports,L=n("NYxO"),P={name:"MqttClient",props:{index:""},data:function(){return{data:{topic:""},topic:"",inputData:{host:"localhost",port:9001,clientId:""},jsonMsg:[{key:"",value:""}],msgName:["gw_cert","gw_connect","server_time","m_data","unsubscribe","scan_res","tm1_connect_req","tm1_disconnect_req","tm1_config","gw1_config","tm1_warn","ack_server","ack_gw"],gw_sn:"",connectOK:"",page:1,interval:"",_timer:"",setTime:500,pahoClient:function(){}}},created:function(){this.inputData.clientId="paho"+this.index},computed:c()({ISTOPICNOTNULL:function(){return""!==this.topic},CANSTART:function(){return this.ISTOPICNOTNULL&&!0===this.connectOK}},Object(L.b)({client:"getMqttClientByIndex"})),watch:{"inputData.host":function(){this.connectOK=""},"inputData.port":function(){this.connectOK=""}},methods:{IsConnect:function(t){this.connectOK=!0,this.pahoClient=t},sendStart:function(){var t=this,e=c()({},this.client(this.index),{running:!0});this.$store.commit("MODIFY_MQTTCLIENT",e),this.pahoClient.subscribe(this.topic),this.interval=setInterval(function(){t.randomValue(t.jsonMsg);var e={};t.jsonMsg.forEach(function(t){e[t.key]=t.value});var n=new E.a.Message(d()(e));n.destinationName=t.topic,t.pahoClient.send(n)},this.setTime)},sendStop:function(){if("number"==typeof this.interval){clearInterval(this.interval),clearInterval(this._timer),this.pahoClient.unsubscribe(this.topic);var t=c()({},this.client(this.index),{running:!1});this.$store.commit("MODIFY_MQTTCLIENT",t)}},pageAdd:function(t,e){var n={};m()(t[0]).forEach(function(t){n[t]=""}),e.value=[].concat(u()(e.value),[n])},pageDelete:function(t,e){this.page==t.length&&this.page--,t.pop()},pageClick:function(t,e){"left"==t&&this.page>1?this.page--:"right"==t&&this.page<e&&this.page++},addProp:function(){this.jsonMsg=[].concat(u()(this.jsonMsg),[{key:"",value:""}])},deleteProp:function(t){0!==t&&this.jsonMsg.splice(t,1)},connect:function(){this.$refs.pahoClient.connect(this.inputData)},submit:function(){if(""!=this.topic.trim()){var t={};this.jsonMsg.forEach(function(e){t[e.key]=e.value});var e=new E.a.Message(d()(t));e.destinationName=this.topic,this.pahoClient.subscribe(this.topic),this.pahoClient.send(e),this.pahoClient.unsubscribe(this.topic)}else alert("topic을 입력하세요")},msgButtonClick:function(t){var e=this,n=q(t);this.jsonMsg=[],this.page=1,m()(n).forEach(function(t,a){"topic"===t?"/"===n[t].charAt(n[t].length-1)?e.topic=n[t]+e.gw_sn:e.topic=n[t]:e.jsonMsg=[].concat(u()(e.jsonMsg),[{key:t,value:"gw1_sn"===t?e.gw_sn:n[t]}])})},randomValue:function(t){t.forEach(function(t){t.value instanceof Array?t.value.forEach(function(t){m()(t).forEach(function(e){t[e]=N(e)})}):t.value=N(t.key)})}},destroyed:function(){clearInterval(this.interval),clearInterval(this._timer),this.connectOK&&this.pahoClient.disconnect()},components:{PahoClient:j}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"container-top-border",attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-start":"","justify-center":""}},[n("v-flex",{staticStyle:{height:"auto",padding:"10px"},attrs:{xs6:"",id:"dataSet"}},[n("div",{staticClass:"formHorizental"},[n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData.host,expression:"inputData.host"}],staticClass:"inpText",staticStyle:{width:"27%"},attrs:{type:"text",placeholder:"host"},domProps:{value:t.inputData.host},on:{input:function(e){e.target.composing||t.$set(t.inputData,"host",e.target.value)}}})]),t._v(" "),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData.port,expression:"inputData.port"}],staticClass:"inpText",staticStyle:{width:"18%"},attrs:{type:"text",placeholder:"port"},domProps:{value:t.inputData.port},on:{input:function(e){e.target.composing||t.$set(t.inputData,"port",e.target.value)}}})]),t._v(" "),n("button",{class:{connect:!0===t.connectOK,disconnect:!1===t.connectOK},attrs:{disabled:!0===t.connectOK},on:{click:function(e){t.connect()}}},[t._v("connect")])]),t._v(" "),n("div",{staticClass:"formHorizental"},[n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.gw_sn,expression:"gw_sn"}],staticClass:"inpText",attrs:{type:"text",placeholder:"gateway serial number"},domProps:{value:t.gw_sn},on:{input:function(e){e.target.composing||(t.gw_sn=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"msg-button"},t._l(t.msgName,function(e){return n("span",{key:e},[n("button",{on:{click:function(n){t.msgButtonClick(e)}}},[t._v(" "+t._s(e)+" ")])])}),0),t._v(" "),n("div",{staticClass:"formHorizental"},[n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.topic,expression:"topic"}],staticClass:"inpText",attrs:{type:"text",placeholder:"topic"},domProps:{value:t.topic},on:{input:function(e){e.target.composing||(t.topic=e.target.value)}}})])]),t._v(" "),n("br"),t._v(" "),t._l(t.jsonMsg,function(e,a){return n("div",{key:a,staticClass:"formHorizental"},["object"==typeof e.value?n("div",{staticStyle:{padding:"10px 0px"}},[n("ul",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.key))]),t._v(" "),n("button",{on:{click:function(n){t.pageClick("left",e.value.length)}}},[t._v(" left ")]),t._v(" "),n("span",[t._v(t._s(t.page)+" / "+t._s(e.value.length))]),t._v(" "),n("button",{on:{click:function(n){t.pageClick("right",e.value.length)}}},[t._v(" right ")]),t._v(" "),n("button",{on:{click:function(n){t.pageAdd(e.value,e)}}},[t._v(" add ")]),t._v(" "),n("button",{on:{click:function(n){t.pageDelete(e.value,e)}}},[t._v(" delete ")]),t._v(" "),t._l(e.value,function(e,a){return n("div",{key:e.tm1_sn+a,staticClass:"intend"},t._l(e,function(i,s){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.page==a+1,expression:"page == idx + 1"}],key:i.key},[n("span",[n("input",{staticClass:"h-inpText",attrs:{type:"text",placeholder:"key"},domProps:{value:s}})]),t._v(" "),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:e[s],expression:"deepMsg[deepMsgProName]"}],staticClass:"h-inpText",attrs:{type:"text",placeholder:"value"},domProps:{value:e[s]},on:{input:function(n){n.target.composing||t.$set(e,s,n.target.value)}}})])])}),0)})],2):n("div",[n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"msg.key"}],staticClass:"h-inpText",attrs:{type:"text",placeholder:"key"},domProps:{value:e.key},on:{input:function(n){n.target.composing||t.$set(e,"key",n.target.value)}}})]),t._v(" "),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"msg.value"}],staticClass:"h-inpText",attrs:{type:"text",placeholder:"value"},domProps:{value:e.value},on:{input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}})]),t._v(" "),n("button",{on:{click:function(e){t.deleteProp(a)}}},[t._v("Delete")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:a==t.jsonMsg.length-1,expression:"index == jsonMsg.length - 1"}]},[n("button",{on:{click:function(e){t.addProp()}}},[t._v("Add")]),t._v(" "),n("button",{attrs:{disabled:!0!==t.connectOK},on:{click:t.submit}},[t._v("Submit")])])])])})],2),t._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-flex",{attrs:{xs12:""}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.setTime,expression:"setTime"}],domProps:{value:t.setTime},on:{input:function(e){e.target.composing||(t.setTime=e.target.value)}}})]),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("button",{attrs:{disabled:!0!==t.CANSTART},on:{click:t.sendStart}},[t._v("Start")]),t._v(" "),n("button",{on:{click:t.sendStop}},[t._v("Stop")]),t._v(" "),n("button",{on:{click:function(e){t.randomValue(t.jsonMsg)}}},[t._v("Random")])]),t._v(" "),n("PahoClient",{ref:"pahoClient",attrs:{client:t.client(t.index)},on:{"is-connect":t.IsConnect}})],1)],1)],1)},staticRenderFns:[]};var $=n("VU/8")(P,S,!1,function(t){n("b/LL")},"data-v-1fb96fa7",null).exports,A={name:"Tabs",computed:c()({},Object(L.b)({mqttClient:"getMqttClient"})),methods:{addClient:function(){this.mqttClient=[].concat(u()(this.mqttClient),[{index:this.mqttClient.length,id:""}])},tabClick:function(t){this.$store.commit("MODIFY_CURRENTINDEX",t)}},components:{MqttClient:$}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tabs",{attrs:{color:"aqua","show-arrows":"",centered:""}},[n("v-tabs-slider",{attrs:{color:"black"}}),t._v(" "),t._l(t.mqttClient,function(e){return n("v-tab",{key:e.index,class:{onrunning:!0===e.running},attrs:{href:"#tab-"+e.index},on:{click:function(n){t.tabClick(e.index)}}},[t._v("\n    client "+t._s(e.index)+"\n  ")])}),t._v(" "),n("v-tabs-items",t._l(t.mqttClient,function(t){return n("v-tab-item",{key:t.index,attrs:{value:"tab-"+t.index}},[n("MqttClient",{attrs:{index:t.index}})],1)}),1)],2)},staticRenderFns:[]};var V={name:"App",components:{Tabs:n("VU/8")(A,R,!1,function(t){n("OCHC")},null,null).exports},data:function(){return{gw_sn:""}},computed:c()({},Object(L.b)({index:"getCurrentIndex"})),methods:{addClient:function(){this.$store.commit("ADD_MQTTCLIENT")},removeClient:function(){this.$store.dispatch("REMOVE_MQTTCLIENT",this.index)}}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[t._m(0),t._v(" "),n("Tabs",{staticClass:"tab-margin"}),t._v(" "),n("div",{staticClass:"fix-button"},[n("button",{on:{click:t.addClient}},[n("v-icon",{attrs:{center:""}},[t._v("add_circle")])],1),t._v(" "),n("button",{on:{click:t.removeClient}},[n("v-icon",{attrs:{center:""}},[t._v("remove_circle")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"header"}},[e("div",{attrs:{id:"gnb"}},[e("h2",[this._v("Gateway Simulator")])])])}]};var F=n("VU/8")(V,Q,!1,function(t){n("Pq21")},null,null).exports,K=n("/ocq");a.default.use(K.a);var H=new K.a({routes:[]});n("Ya8g");a.default.use(L.a);var U=new L.a.Store({state:{mqttClient:[{host:"",port:"",index:0,id:"",connecting:!1,running:!1}],currentIndex:0,tempNum:0},getters:{getMqttClient:function(t){return t.mqttClient},getMqttClientByIndex:function(t){return function(e){return t.mqttClient[e]}},getCurrentIndex:function(t){return t.currentIndex}},mutations:{ADD_MQTTCLIENT:function(t){t.mqttClient=[].concat(u()(t.mqttClient),[{index:++t.tempNum,id:""}])},REMOVE_MQTTCLIENT:function(t,e){t.mqttClient=t.mqttClient.filter(function(t){return t.index!==e}),t.currentIndex=t.mqttClient[t.mqttClient.length-1].index},MODIFY_MQTTCLIENT:function(t,e){t.mqttClient[e.index]=e},MODIFY_CURRENTINDEX:function(t,e){t.currentIndex=e}},actions:{REMOVE_MQTTCLIENT:function(t,e){var n=t.commit,a=t.state;0!==e&&(a.mqttClient[a.mqttClient.findIndex(function(t){return t.index===e})].id,n("REMOVE_MQTTCLIENT",e))}}});n("7zck");a.default.config.productionTip=!1,a.default.use(s.a),window.axios=n("mtWM"),a.default.prototype.$EventBus=new a.default,new a.default({el:"#app",router:H,store:U,components:{App:F},template:"<App/>"})},OCHC:function(t,e){},Pq21:function(t,e){},"b/LL":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c30d6a8f25586dc2fd01.js.map